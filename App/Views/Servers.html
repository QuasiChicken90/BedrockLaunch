<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Launcher | Servers</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/launcherfiles/resources/CSS/global.css">
</head>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    * {
        font-family: 'Inter', sans-serif;
    }

    body {
        margin: 0;
        padding: 0;
        background: #1e1e1e;
    }

    body {
        overflow-y: scroll;
        -ms-overflow-style: none;
    }

    body::-webkit-scrollbar {
        width: 0;
        height: 0;
    }
    

    html, body {
        background: transparent;
    }
    
    .LauncherContainer {
        width: 100%;
        height: 100vh;
    }


.btnPlay {
    position: absolute;
    width: 352px;
    height: 91px;
    border: none;
    background: linear-gradient(135deg, rgba(228, 228, 228, 0.01) 100%, rgba(206, 206, 206, 0.01) 0%);
    box-shadow: 0px 4px 49.7px 1px rgba(0, 0, 0, 0.25), inset 1px 1px 2px rgba(255, 255, 255, 0.3), inset -1px -1px 2px rgba(87, 87, 87, 0.5);
    backdrop-filter: blur(4px);
    border-radius: 256px;
    font-weight: 900;
    font-size: 27px;
    color: white;

    /* positioning ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ */
    bottom: 10%;
    left: 62%;
    transform: translate(-50%, 0);
    
    

}
.btnPlay i {
    font-size: 32px; 
    color: white;   
}

.btnPlay:active {
    background-color: rgb(37, 95, 255, 0.5);
}

.Servers {
    position: fixed;
    top: 1%;
    left: 30%;
    color: white;
    font-size: 30px;
    font-weight: 700;
    z-index: 9999;
}

.btnUseVer {
    margin-left: 20px;
    padding: 10px 20px;
    background-color: rgb(255, 255, 255,0.1);
    color: white;
    font-weight: 500;
    border: none;
    border-radius: 256px;
}

.btnUseVer:active {
    background-color: rgb(37, 95, 255, 1);
}

    .ServerList {
      position: absolute;
      top: 15%;
      left: 30%;
      width: 60%;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      z-index: 10;
    }

    .ServerContainer {
      flex: 1 1 45%;
      min-width: 300px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem;
        background: linear-gradient(135deg, rgba(228, 228, 228, 0.01) 100%, rgba(206, 206, 206, 0.01) 0%);
        box-shadow: 0px 4px 49.7px 1px rgba(0, 0, 0, 0.25), inset 1px 1px 2px rgba(255, 255, 255, 0.3), inset -1px -1px 2px rgba(87, 87, 87, 0.5);
        backdrop-filter: blur(7.5px);
      border-radius: 15px;
      
    }

    .ServerContainer h3 {
      font-weight: 600;
      font-size: 20px;
    }

    h3 {
        color: white;
    }

    .btnReload {
        position: fixed;
        top: 3.5%;
        left: 87%;
        transform: translate(-50%, 0);
        width: 150px;
        height: 40px;
        background: linear-gradient(135deg, rgba(228, 228, 228, 0.01) 100%, rgba(206, 206, 206, 0.01) 0%);
        box-shadow: 0px 4px 49.7px 1px rgba(0, 0, 0, 0.25), inset 1px 1px 2px rgba(255, 255, 255, 0.3), inset -1px -1px 2px rgba(87, 87, 87, 0.5);
        backdrop-filter: blur(3.5px) saturate(2);
        color: white;
        font-weight: 500;
        border: none;
        border-radius: 256px;
        z-index: 9999;
    }

    h3, h4, h5 {
        color: white !important;
    }



</style>

<script>

</script>

<body>



<div class="LauncherContainer">

    <div onclick="location.href = '/launcher/quit'" class="windowControls">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="white" class="closeButton">
            <path d="M18 6L6 18M6 6l12 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

    <video autoplay muted loop preload="metadata" class="LauncherVideo">
        <source src="{{ themePath }}" type="video/mp4">
        Failed to load theme. Video not supported.
    </video>

<div class="sideBar">
    <button onclick="location.href = '/'" class="btnInactiveTab">
        <i class="fas fa-home"></i>
        <span>Home</span>
    </button>
    <button onclick="location.href = '/launcher/library'" class="btnInactiveTab">
        <i class="fas fa-book"></i>
        <span>Library</span>
    </button>
         <button class="btnActiveTab">
        <i class="fas fa-server"></i>
        <span>Servers</span>
    </button>
    <button onclick="location.href = '/launcher/articles'" class="btnInactiveTab">
        <i class="fas fa-newspaper"></i>
        <span>Articles</span>
    </button>
    <button onclick="location.href = '/launcher/settings'" class="btnInactiveTab">
        <i class="fas fa-cog"></i>
        <span>Settings</span>
    </button>
</div>

    <h3 class="Servers">Servers</h3>
    <div class="UpperDepthEffect pywebview-drag-region"></div>

    <button onclick="location.href = '/launcher/servers'" class="btnReload">Refresh</button>

 <div class="ServerList">
  </div>

  <script>
async function loadServers() {
  const container = document.querySelector(".ServerList");
  container.innerHTML = "<h1 style='color:white;'>Loading servers...</h1>";

  try {
    const res = await fetch("/launcher/api/servers/getlist");
    const servers = await res.json();

    container.innerHTML = ""; 

    servers.forEach(server => {
      const div = document.createElement("div");
      div.classList.add("ServerContainer");
      div.innerHTML = `
        <h3>${server.name}</h3>
        <h4>${server.ip}:${server.port}</h4>
        <h5>${server.online ? 
              `${server.players_online} online right now` : 
              "Offline"}</h5>
      `;
      container.appendChild(div);
    });

  } catch (err) {
    container.innerHTML = `<p style="color:red;">Failed to load servers: ${err}</p>`;
  }
}

loadServers();
</script>
</body>
</html>
